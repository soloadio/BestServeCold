<div class="flex flex-col min-h-screen min-w-screen">
  <!-- Navbar stays at top -->
  <app-navbar></app-navbar>

  <!-- Content area centered -->
  <div class="flex flex-1 items-center justify-center p-4">
    <div class="flex flex-row items-center justify-center gap-12">
      <!-- Form Column -->
      <div class="flex flex-col items-center justify-center prose lg:prose-xl">
        <form (ngSubmit)="emailSubmission()" #emailForm="ngForm" enctype="multipart/form-data">
          <fieldset class="fieldset bg-base-200 border-base-300 rounded-box w-xs border p-4">
            <legend class="fieldset-legend">Email Information</legend>

            <label class="label">Name</label>
            <input type="text" class="input" placeholder="Full Name" [(ngModel)]="emaildata.name" name="name"/>

            <label class="label">University/College</label>
            <input type="text" class="input" placeholder="e.g. McMaster University" [(ngModel)]="emaildata.university" name="university"/>

            <label class="label">Program</label>
            <input type="text" class="input" placeholder="e.g. Health Science" [(ngModel)]="emaildata.program" name="program"/>
            
            <label class="label">Upload CSV file</label>
            <input type="file" class="file-input" (change)="onFileSelected($event)"/>

            <label class="label">Email Prompt</label>
            <input type="text" class="input" placeholder="Leave blank for default" [(ngModel)]="emaildata.prompt" name="prompt"/>

            <button class="btn btn-primary mt-4" type="submit" [disabled]="loading">
              <ng-container *ngIf="!loading">Generate Drafts</ng-container>
              <ng-container *ngIf="loading">
                <span class="loading loading-spinner loading-lg"></span>
              </ng-container>
            </button>
          </fieldset>
        </form>
      </div>

      <!-- Batch List Column -->
      <div class="flex flex-col items-center justify-center min-w-[200px] max-w-xs p-4 ">
        <h2 class="text-lg font-semibold mb-2">Recent Batches</h2>
        <ul class="menu bg-base-200 rounded-box w-56">
          <li *ngFor="let batch of batches">
            <a class="link link-hover link-primary" (click)="goToBatch(batch.id)">
              {{ batch.created_at | date:'medium' }}
            </a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>
